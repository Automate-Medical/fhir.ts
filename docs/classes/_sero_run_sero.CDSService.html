<!DOCTYPE html><html class="default no-js"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>CDSService | @sero.run/sero</title><meta name="description" content="Documentation for @sero.run/sero"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@sero.run/sero</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@sero.run/sero</a></li><li><a href="../modules/_sero_run_sero.html">@sero.run/sero</a></li><li><a href="_sero_run_sero.CDSService.html">CDSService</a></li></ul><h1>Class CDSService</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>A <strong>CDSService</strong> that provides patient-specific recommendations and guidance
through RESTful APIs as described by the CDS Hooks spec.</p>
</div><div><p>The primary APIs are Discovery, which allows a CDS Developer to publish the
types of CDS Services it provides, and the Service endpoint that CDS Clients
use to request and invoke decision support services.</p>
<p><strong>CDSService</strong> automatically creates an HTTP API conformant with the CDS Hooks
spec for you with just a few lines of code. Internally, <strong>CDSService</strong> uses
{@link http} and to deliver its HTTP API. <strong>CDSService</strong> can be used in
isolation or in combination with other modules composed on top of
{@link http} like <a href="../modules/rest.html">rest</a> and {@link smart}.</p>
<p>When invoked in response to a CDSHookRequest event by a CDS Client, Service will
first validate the request and then call the invocation function as defined
at construction. This function, <a href="_sero_run_sero.CDSService.html#handler">handler</a>, receives the prefetch
response in the CDSHookRequest as defined by the Service up front. You can
perform any necessary work here necessary to satisfy the request. Calling out
to a tensorflow model, or passing parameters to an external API for example.</p>
</div><dl class="tsd-comment-tags"><dt>version</dt><dd><p><a href="https://cds-hooks.hl7.org/ballots/2020Sep/">https://cds-hooks.hl7.org/ballots/2020Sep/</a></p>
</dd><dt>todo</dt><dd><p>Support warning message if prefetch query restrictions are broken
<a href="https://cds-hooks.org/specification/current/#prefetch-query-restrictions">https://cds-hooks.org/specification/current/#prefetch-query-restrictions</a></p>
</dd><dt>example</dt><dd><p>Here&#39;s an example:</p>
<pre><code class="language-typescript"><span class="hl-1"> </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-2">CDSService</span><span class="hl-1">(</span><br/><span class="hl-1">   {</span><br/><span class="hl-1">     </span><span class="hl-3">title:</span><span class="hl-1"> </span><span class="hl-4">&quot;patient-view Hook Service Example&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-3">hook:</span><span class="hl-1"> </span><span class="hl-4">&quot;patient-view&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-3">description:</span><span class="hl-1"> </span><span class="hl-4">&quot;An example&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">     </span><span class="hl-3">prefetch:</span><span class="hl-1"> {</span><br/><span class="hl-1">       </span><span class="hl-3">patient:</span><span class="hl-1"> </span><span class="hl-4">&quot;Patient/{{context.patientId}}&quot;</span><br/><span class="hl-1">     }</span><br/><span class="hl-1">   },</span><br/><span class="hl-1">   (</span><span class="hl-3">request</span><span class="hl-1">: </span><span class="hl-5">CDSHooks</span><span class="hl-1">.</span><span class="hl-5">HookRequest</span><span class="hl-1">&lt;{ </span><span class="hl-3">patient</span><span class="hl-1">: </span><span class="hl-5">fhir4</span><span class="hl-1">.</span><span class="hl-5">Patient</span><span class="hl-1"> }&gt;) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">     </span><span class="hl-0">const</span><span class="hl-1"> { </span><span class="hl-6">patient</span><span class="hl-1"> } = </span><span class="hl-3">request</span><span class="hl-1">.</span><span class="hl-3">prefetch</span><span class="hl-1">;</span><br/><span class="hl-1">     </span><span class="hl-7">// Your response logic here</span><br/><span class="hl-1">     </span><span class="hl-8">return</span><span class="hl-1"> { </span><span class="hl-3">cards:</span><span class="hl-1"> [] }</span><br/><span class="hl-1">   }</span><br/><span class="hl-1">)</span>
</code></pre>
</dd></dl></div></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">CDSService</span></li></ul></section><section class="tsd-panel"><h3>Implements</h3><ul class="tsd-hierarchy"><li><a href="_sero_run_sero.CDSService.html" class="tsd-signature-type" data-tsd-kind="Class">CDSService</a></li></ul></section><section class="tsd-panel"><h3>Implemented by</h3><ul class="tsd-hierarchy"><li><a href="_sero_run_sero.CDSService.html" class="tsd-signature-type" data-tsd-kind="Class">CDSService</a></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Constructors</h3><ul class="tsd-index-list"><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#constructor" class="tsd-kind-icon">constructor</a></li></ul></section><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#description" class="tsd-kind-icon">description</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#extension" class="tsd-kind-icon">extension</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#handler" class="tsd-kind-icon">handler</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#hook" class="tsd-kind-icon">hook</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#id" class="tsd-kind-icon">id</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#prefetch" class="tsd-kind-icon">prefetch</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#title" class="tsd-kind-icon">title</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Constructors</h2><section class="tsd-panel tsd-member tsd-kind-constructor tsd-parent-kind-class"><a name="constructor" class="tsd-anchor"></a><h3>constructor</h3><ul class="tsd-signatures tsd-kind-constructor tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">new CDSService<span class="tsd-signature-symbol">(</span>options<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Partial</span><span class="tsd-signature-symbol">&lt;</span><a href="_sero_run_sero.CDSService.html" class="tsd-signature-type" data-tsd-kind="Class">CDSService</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol"> &amp; </span><span class="tsd-signature-symbol">{ </span>description<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span>hook<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Hooks</span><span class="tsd-signature-symbol"> }</span>, handler<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">ServiceHandler</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="_sero_run_sero.CDSService.html" class="tsd-signature-type" data-tsd-kind="Class">CDSService</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/Automate-Medical/sero/blob/f605539/src/cds-hooks/service.ts#L107">src/cds-hooks/service.ts:107</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Pass any options along with a function that will execute on CDSHookRequest
invocation events</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>options: <span class="tsd-signature-type">Partial</span><span class="tsd-signature-symbol">&lt;</span><a href="_sero_run_sero.CDSService.html" class="tsd-signature-type" data-tsd-kind="Class">CDSService</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol"> &amp; </span><span class="tsd-signature-symbol">{ </span>description<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span>hook<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Hooks</span><span class="tsd-signature-symbol"> }</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<ul>
<li></li>
</ul>
</div></div></li><li><h5>handler: <span class="tsd-signature-type">ServiceHandler</span></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="_sero_run_sero.CDSService.html" class="tsd-signature-type" data-tsd-kind="Class">CDSService</a></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a name="description" class="tsd-anchor"></a><h3>description</h3><div class="tsd-signature tsd-kind-icon">description<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><p>Implementation of CDSService.description</p><ul><li>Defined in <a href="https://github.com/Automate-Medical/sero/blob/f605539/src/cds-hooks/service.ts#L74">src/cds-hooks/service.ts:74</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The description of this service.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a name="extension" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> extension</h3><div class="tsd-signature tsd-kind-icon">extension<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">Extension</span></div><aside class="tsd-sources"><p>Implementation of CDSService.extension</p><ul><li>Defined in <a href="https://github.com/Automate-Medical/sero/blob/f605539/src/cds-hooks/service.ts#L98">src/cds-hooks/service.ts:98</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>An object containing key/value pairs of FHIR extensions. The key is the name
of the extension and the value is the extended data made available to the CDS
service. Extensions are loosely defined, as incorporating all valid
requirements would make this specification very cumbersome and difficult to
implement. Thus, all the additional information a service needs will be implemented
as an extension.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a name="handler" class="tsd-anchor"></a><h3>handler</h3><div class="tsd-signature tsd-kind-icon">handler<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">ServiceHandler</span></div><aside class="tsd-sources"><p>Implementation of CDSService.handler</p><ul><li>Defined in <a href="https://github.com/Automate-Medical/sero/blob/f605539/src/cds-hooks/service.ts#L89">src/cds-hooks/service.ts:89</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>A function to execute on CDSHookRequest invocation events</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a name="hook" class="tsd-anchor"></a><h3>hook</h3><div class="tsd-signature tsd-kind-icon">hook<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Hooks</span></div><aside class="tsd-sources"><p>Implementation of CDSService.hook</p><ul><li>Defined in <a href="https://github.com/Automate-Medical/sero/blob/f605539/src/cds-hooks/service.ts#L78">src/cds-hooks/service.ts:78</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The hook this service should be invoked on.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a name="id" class="tsd-anchor"></a><h3>id</h3><div class="tsd-signature tsd-kind-icon">id<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><p>Implementation of CDSService.id</p><ul><li>Defined in <a href="https://github.com/Automate-Medical/sero/blob/f605539/src/cds-hooks/service.ts#L66">src/cds-hooks/service.ts:66</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The id portion of the URL to this service which is available at
<code>{baseUrl}/cds-services/{id}</code></p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a name="prefetch" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> prefetch</h3><div class="tsd-signature tsd-kind-icon">prefetch<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">PrefetchTemplate</span></div><aside class="tsd-sources"><p>Implementation of CDSService.prefetch</p><ul><li>Defined in <a href="https://github.com/Automate-Medical/sero/blob/f605539/src/cds-hooks/service.ts#L85">src/cds-hooks/service.ts:85</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>An object containing key/value pairs of FHIR queries that this service is
requesting that the CDS Client prefetch and provide on each service call.
The key is a string that describes the type of data being requested and the
value is a string representing the FHIR query.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a name="title" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagOptional">Optional</span> title</h3><div class="tsd-signature tsd-kind-icon">title<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><p>Implementation of CDSService.title</p><ul><li>Defined in <a href="https://github.com/Automate-Medical/sero/blob/f605539/src/cds-hooks/service.ts#L70">src/cds-hooks/service.ts:70</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The human-friendly name of this service.</p>
</div></div></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Modules</a></li><li class="current tsd-kind-module"><a href="../modules/_sero_run_sero.html">@sero.run/sero</a></li><li class=" tsd-kind-module"><a href="../modules/cds_hooks.html">cds-<wbr/>hooks</a></li><li class=" tsd-kind-module"><a href="../modules/rest.html">rest</a></li><li class=" tsd-kind-module"><a href="../modules/smart_auth.html">smart-<wbr/>auth</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-class tsd-parent-kind-module"><a href="_sero_run_sero.CDSService.html" class="tsd-kind-icon">CDSService</a><ul><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#constructor" class="tsd-kind-icon">constructor</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#description" class="tsd-kind-icon">description</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#extension" class="tsd-kind-icon">extension</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#handler" class="tsd-kind-icon">handler</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#hook" class="tsd-kind-icon">hook</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#id" class="tsd-kind-icon">id</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#prefetch" class="tsd-kind-icon">prefetch</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="_sero_run_sero.CDSService.html#title" class="tsd-kind-icon">title</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>